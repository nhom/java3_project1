<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1" dbms="h2" author="viktor" context="main">
        <createSequence sequenceName="clients_seq" />
    </changeSet>

    <changeSet id="2" dbms="h2" author="viktor" context="main">
        <createTable tableName="clients">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="login" type="varchar(50)">
                <constraints nullable="false"/>
            </column>

            <column name="password" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Table structure for table `countries` -->
    <changeSet id="4" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `countries` (
            `country_id` bigint(20) NOT NULL,
            `name` varchar(70) NOT NULL DEFAULT '',
            `code` char(2) NOT NULL DEFAULT '',
            `code3` char(3) NOT NULL,
            `phone_code` int(7) NOT NULL,
            PRIMARY KEY (`country_id`),
            UNIQUE KEY `code` (`code`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `countries`;
            </sql>
        </rollback>
    </changeSet>


    <!-- Table structure for table `contact` -->
    <changeSet id="3" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `contact` (
            `contact_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `phone_number` int(11) DEFAULT NULL,
            `email` varchar(50) DEFAULT NULL,
            `updated` datetime DEFAULT NULL,
            `created` datetime NOT NULL,
            `country_id` bigint(20) NOT NULL,
            PRIMARY KEY (`contact_id`),
            UNIQUE KEY `contact_id_uindex` (`contact_id`),
            KEY `contact_countries__fk` (`country_id`),
            CONSTRAINT `contact_countries__fk` FOREIGN KEY (`country_id`) REFERENCES `countries` (`country_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `contact`;
            </sql>
        </rollback>
    </changeSet>
    
    <!-- Table structure for table `countries` -->
    <changeSet id="4" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `countries` (
            `country_id` bigint(20) NOT NULL,
            `name` varchar(70) NOT NULL DEFAULT '',
            `code` char(2) NOT NULL DEFAULT '',
            `phone_code` int(7) NOT NULL,
            PRIMARY KEY (`country_id`),
            UNIQUE KEY `code` (`code`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `countries`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Data for table `countries` -->
    <changeSet id="5" dbms="mysql" author="edgar" context="main">
        <sql>
            LOCK TABLES `countries` WRITE;
            INSERT INTO `countries` VALUES (1,'United States','US',1),(2,'Canada','CA',1),(3,'Afghanistan','AF',93),(4,'Albania','AL',355),(5,'Algeria','DZ',213),(6,'American Samoa','DS',44),(7,'Andorra','AD',376),(8,'Angola','AO',244),(9,'Anguilla','AI',1264),(10,'Antarctica','AQ',672),(11,'Antigua and Barbuda','AG',1268),(12,'Argentina','AR',54),(13,'Armenia','AM',374),(14,'Aruba','AW',297),(15,'Australia','AU',61),(16,'Austria','AT',43),(17,'Azerbaijan','AZ',994),(18,'Bahamas','BS',1242),(19,'Bahrain','BH',973),(20,'Bangladesh','BD',880),(21,'Barbados','BB',1246),(22,'Belarus','BY',375),(23,'Belgium','BE',32),(24,'Belize','BZ',501),(25,'Benin','BJ',229),(26,'Bermuda','BM',1441),(27,'Bhutan','BT',975),(28,'Bolivia','BO',591),(29,'Bosnia and Herzegovina','BA',387),(30,'Botswana','BW',267),(31,'Bouvet Island','BV','',44),(32,'Brazil','BR',55),(33,'British lndian Ocean Territory','IO',0),(34,'Brunei Darussalam','BN',673),(35,'Bulgaria','BG',359),(36,'Burkina Faso','BF',226),(37,'Burundi','BI',257),(38,'Cambodia','KH',855),(39,'Cameroon','CM',237),(40,'Cape Verde','CV',238),(41,'Cayman Islands','KY',1345),(42,'Central African Republic','CF',236),(43,'Chad','TD',235),(44,'Chile','CL',56),(45,'China','CN',86),(46,'Christmas Island','CX',61),(47,'Cocos (Keeling) Islands','CC',61),(48,'Colombia','CO',57),(49,'Comoros','KM',269),(50,'Congo','CG',242),(51,'Cook Islands','CK',682),(52,'Costa Rica','CR',506),(53,'Croatia (Hrvatska)','HR',385),(54,'Cuba','CU',53),(55,'Cyprus','CY',357),(56,'Czech Republic','CZ',420),(57,'Denmark','DK',45),(58,'Djibouti','DJ',253),(59,'Dominica','DM',1767),(60,'Dominican Republic','DO',1809),(61,'East Timor','TP','',44),(62,'Ecuador','EC',593),(63,'Egypt','EG',20),(64,'El Salvador','SV',503),(65,'Equatorial Guinea','GQ',240),(66,'Eritrea','ER',291),(67,'Estonia','EE',372),(68,'Ethiopia','ET',251),(69,'Falkland Islands (Malvinas)','FK',500),(70,'Faroe Islands','FO',298),(71,'Fiji','FJ',679),(72,'Finland','FI',358),(73,'France','FR',33),(74,'France, Metropolitan','FX','',44),(75,'French Guiana','GF','',44),(76,'French Polynesia','PF',689),(77,'French Southern Territories','TF','',44),(78,'Gabon','GA',241),(79,'Gambia','GM',220),(80,'Georgia','GE',995),(81,'Germany','DE',49),(82,'Ghana','GH',233),(83,'Gibraltar','GI',350),(84,'Greece','GR',30),(85,'Greenland','GL',299),(86,'Grenada','GD',1473),(87,'Guadeloupe','GP','',44),(88,'Guam','GU',1671),(89,'Guatemala','GT',502),(90,'Guinea','GN',224),(91,'Guinea-Bissau','GW',245),(92,'Guyana','GY',592),(93,'Haiti','HT',509),(94,'Heard and Mc Donald Islands','HM','',44),(95,'Honduras','HN',504),(96,'Hong Kong','HK',852),(97,'Hungary','HU',36),(98,'Iceland','IS','IS',354),(99,'India','IN',91),(100,'Indonesia','ID',62),(101,'Iran (Islamic Republic of)','IR',98),(102,'Iraq','IQ',964),(103,'Ireland','IE',353),(104,'Israel','IL',972),(105,'Italy','IT',39),(106,'Ivory Coast','CI',225),(107,'Jamaica','JM',1876),(108,'Japan','JP',81),(109,'Jordan','JO',962),(110,'Kazakhstan','KZ',7),(111,'Kenya','KE',254),(112,'Kiribati','KI',686),(113,'Korea, Democratic People\'s Republic of','KP',850),(114,'Korea, Republic of','KR',82),(115,'Kuwait','KW',965),(116,'Kyrgyzstan','KG',996),(117,'Lao People\'s Democratic Republic','LA',856),(118,'Latvia','LV',371),(119,'Lebanon','LB',961),(120,'Lesotho','LS',266),(121,'Liberia','LR',231),(122,'Libyan Arab Jamahiriya','LY',218),(123,'Liechtenstein','LI',423),(124,'Lithuania','LT',370),(125,'Luxembourg','LU',352),(126,'Macau','MO',853),(127,'Macedonia','MK',389),(128,'Madagascar','MG',261),(129,'Malawi','MW',265),(130,'Malaysia','MY',60),(131,'Maldives','MV',960),(132,'Mali','ML',223),(133,'Malta','MT',356),(134,'Marshall Islands','MH',692),(135,'Martinique','MQ','',44),(136,'Mauritania','MR',222),(137,'Mauritius','MU',230),(138,'Mayotte','TY',262),(139,'Mexico','MX',52),(140,'Micronesia, Federated States of','FM',691),(141,'Moldova, Republic of','MD',373),(142,'Monaco','MC',377),(143,'Mongolia','MN',976),(144,'Montserrat','MS',1664),(145,'Morocco','MA',212),(146,'Mozambique','MZ',258),(147,'Myanmar','MM',95),(148,'Namibia','NA',264),(149,'Nauru','NR',674),(150,'Nepal','NP',977),(151,'Netherlands','NL',31),(152,'Netherlands Antilles','AN',599),(153,'New Caledonia','NC',687),(154,'New Zealand','NZ',64),(155,'Nicaragua','NI',505),(156,'Niger','NE',227),(157,'Nigeria','NG',234),(158,'Niue','NU',683),(159,'Norfork Island','NF','',44),(160,'Northern Mariana Islands','MP',1670),(161,'Norway','NO',47),(162,'Oman','OM',968),(163,'Pakistan','PK',92),(164,'Palau','PW',680),(165,'Panama','PA',507),(166,'Papua New Guinea','PG',675),(167,'Paraguay','PY',595),(168,'Peru','PE',51),(169,'Philippines','PH',63),(170,'Pitcairn','PN',870),(171,'Poland','PL',48),(172,'Portugal','PT',351),(173,'Puerto Rico','PR',1),(174,'Qatar','QA',974),(175,'Reunion','RE','',44),(176,'Romania','RO',40),(177,'Russian Federation','RU',7),(178,'Rwanda','RW',250),(179,'Saint Kitts and Nevis','KN',1869),(180,'Saint Lucia','LC',1758),(181,'Saint Vincent and the Grenadines','VC',1784),(182,'Samoa','WS',685),(183,'San Marino','SM',378),(184,'Sao Tome and Principe','ST',239),(185,'Saudi Arabia','SA',966),(186,'Senegal','SN',221),(187,'Seychelles','SC',248),(188,'Sierra Leone','SL',232),(189,'Singapore','SG',65),(190,'Slovakia','SK',421),(191,'Slovenia','SI',386),(192,'Solomon Islands','SB',677),(193,'Somalia','SO',252),(194,'South Africa','ZA',27),(195,'South Georgia South Sandwich Islands','GS','',44),(196,'Spain','ES',34),(197,'Sri Lanka','LK',94),(198,'St. Helena','SH',290),(199,'St. Pierre and Miquelon','PM',508),(200,'Sudan','SD',249),(201,'Suriname','SR',597),(202,'Svalbarn and Jan Mayen Islands','SJ',0),(203,'Swaziland','SZ',268),(204,'Sweden','SE',46),(205,'Switzerland','CH',41),(206,'Syrian Arab Republic','SY',963),(207,'Taiwan','TW',886),(208,'Tajikistan','TJ',992),(209,'Tanzania, United Republic of','TZ',255),(210,'Thailand','TH',66),(211,'Togo','TG',228),(212,'Tokelau','TK',690),(213,'Tonga','TO',676),(214,'Trinidad and Tobago','TT',1868),(215,'Tunisia','TN',216),(216,'Turkey','TR',90),(217,'Turkmenistan','TM',993),(218,'Turks and Caicos Islands','TC',1649),(219,'Tuvalu','TV',688),(220,'Uganda','UG',256),(221,'Ukraine','UA',380),(222,'United Arab Emirates','AE',971),(223,'United Kingdom','GB',44),(224,'United States minor outlying islands','UM','',44),(225,'Uruguay','UY',598),(226,'Uzbekistan','UZ',998),(227,'Vanuatu','VU',678),(228,'Vatican City State','VA',39),(229,'Venezuela','VE',58),(230,'Vietnam','VN',84),(231,'Virigan Islands (British)','VG',1284),(232,'Virgin Islands (U.S.)','VI',1340),(233,'Wallis and Futuna Islands','WF',681),(234,'Western Sahara','EH',0),(235,'Yemen','YE',967),(236,'Yugoslavia','YU','',44),(237,'Zaire','ZR','',44),(238,'Zambia','ZM',260),(239,'Zimbabwe','ZW',263),(240,'Kosovo','XK','',381),(243,'Montenegro','ME',382),(386,'Serbia','RS',381);
            UNLOCK TABLES;
        </sql>
    </changeSet>

    <!-- Table structure for table `events` -->
    <changeSet id="6" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `events` (
            `event_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(150) NOT NULL,
            `description` text NOT NULL,
            `date` datetime NOT NULL,
            `created` datetime NOT NULL,
            `updated` datetime DEFAULT NULL,
            `profile_id` bigint(20) NOT NULL,
            PRIMARY KEY (`event_id`),
            UNIQUE KEY `events_id_uindex` (`event_id`),
            KEY `event` (`profile_id`),
            CONSTRAINT `events_profile__fk` FOREIGN KEY (`profile_id`) REFERENCES `profile` (`profile_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `events`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `login_credentials` -->
    <changeSet id="7" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `login_credentials` (
            `login_credential_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
            `login` varchar(50) NOT NULL,
            `password` varchar(50) NOT NULL,
            `profile_id` bigint(20) NOT NULL,
            `created` datetime DEFAULT NULL,
            `last_login` datetime NOT NULL,
            PRIMARY KEY (`login_credential_id`),
            UNIQUE KEY `login_credentials_profile_id_uindex` (`profile_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `login_credentials`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `tickets` -->
    <changeSet id="8" dbms="mysql" author="edgar" context="main">
        <sql>
        CREATE TABLE `tickets` (
        `ticket_id` bigint(20) NOT NULL AUTO_INCREMENT,
        `price` int(11) NOT NULL,
        `purchaseDate` datetime DEFAULT NULL,
        `profile_id` bigint(20) DEFAULT NULL,
        `event_id` bigint(20) NOT NULL,
        PRIMARY KEY (`ticket_id`),
        UNIQUE KEY `table_name_ticket_id_uindex` (`ticket_id`),
        KEY `tickets_events__fk` (`event_id`),
        KEY `tickets_profile__fk` (`profile_id`),
        CONSTRAINT `tickets_events__fk` FOREIGN KEY (`event_id`) REFERENCES `events` (`event_id`),
        CONSTRAINT `tickets_profile__fk` FOREIGN KEY (`profile_id`) REFERENCES `profile` (`profile_id`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `tickets`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `profile` -->
    <changeSet id="9" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `profile` (
            `profile_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `name` varchar(50) NOT NULL,
            `surname` varchar(100) NOT NULL,
            `contact_id` bigint(20) DEFAULT NULL,
            `login_credentials_id` bigint(20) NOT NULL,
            `created` datetime NOT NULL,
            `updated` datetime NOT NULL,
            PRIMARY KEY (`profile_id`),
            UNIQUE KEY `profile_id_uindex` (`profile_id`),
            KEY `profile_contact__fk` (`contact_id`),
            CONSTRAINT `profile_contact__fk` FOREIGN KEY (`contact_id`) REFERENCES `contact` (`contact_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `profile`;
            </sql>
        </rollback>
    </changeSet>


    <!-- Table structure for table `city` -->
    <changeSet id="10" dbms="mysql" author="vlad" context="main">
        <sql>
            CREATE TABLE `cities` (
            `city_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(50) NOT NULL,
            UNIQUE KEY `city_id_uindex` (`city_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `cities`;
            </sql>
        </rollback>
    </changeSet>


    <!-- Table structure for table `loginstatus` -->
    <changeSet id="12" dbms="mysql" author="vlad" context="main">
        <sql>
            CREATE TABLE `login_status` (
            `status_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(50) NOT NULL,
            UNIQUE KEY `status_id_uindex` (`status_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `login_status`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `Address` -->
    <changeSet id="11" dbms="mysql" author="vlad" context="main">
        <sql>
            CREATE TABLE `addresses` (
            `address_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `city_id` bigint(20) NOT NULL,
            `country_id` bigint(20) NOT NULL,
            `street` varchar(50) NOT NULL,
            `building_number` int(7) NOT NULL,
            `zip_code` int(5) DEFAULT NULL,
            PRIMARY KEY (`adress_id`),
            UNIQUE KEY `adress_id_uindex` (`adress_id`),
            FOREIGN KEY (`city_id`) REFERENCES `cities` (`city_id`),
            FOREIGN KEY (`country_id`) REFERENCES `countries` (`country_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `adresses`;
            </sql>
        </rollback>
    </changeSet>


    <!-- Table structure for table `events` -->
    <changeSet id="6" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `events` (
            `event_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(150) NOT NULL,
            `description` text NOT NULL,
            `created` datetime NOT NULL,
            `updated` datetime DEFAULT NULL,
            `author_profile_id` bigint(20) NOT NULL,
            PRIMARY KEY (`event_id`),
            UNIQUE KEY `events_id_uindex` (`event_id`),
            KEY `event` (`author_profile_id`),
            CONSTRAINT `events_profile__fk` FOREIGN KEY (`author_profile_id`) REFERENCES `profile` (`profile_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `events`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `notification_status` -->
    <changeSet id="13" dbms="mysql" author="vlad" context="main">
        <sql>
            CREATE TABLE `notification_status` (
            `status_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(50) NOT NULL,
            UNIQUE KEY `notif_status_id_uindex` (`status_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `notification_status`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `notification_type` -->
    <changeSet id="14" dbms="mysql" author="vlad" context="main">
        <sql>
            CREATE TABLE `notification_type` (
            `status_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(50) NOT NULL,
            UNIQUE KEY `notif_type_id_uindex` (`status_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `notification_type`;
            </sql>
        </rollback>
    </changeSet>


</databaseChangeLog>
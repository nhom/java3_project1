<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1" dbms="h2" author="viktor" context="main">
        <createSequence sequenceName="clients_seq" />
    </changeSet>

    <changeSet id="2" dbms="h2" author="viktor" context="main">
        <createTable tableName="clients">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="login" type="varchar(50)">
                <constraints nullable="false"/>
            </column>

            <column name="password" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Table structure for table `contact` -->
    <changeSet id="3" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `contact` (
            `contact_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `phone_number` int(11) DEFAULT NULL,
            `email` varchar(50) DEFAULT NULL,
            `updated` datetime DEFAULT NULL,
            `created` datetime NOT NULL,
            `country_id` int(11) NOT NULL,
            PRIMARY KEY (`contact_id`),
            UNIQUE KEY `contact_id_uindex` (`contact_id`),
            KEY `contact_countries__fk` (`country_id`),
            CONSTRAINT `contact_countries__fk` FOREIGN KEY (`country_id`) REFERENCES `countries` (`country_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `contact`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `countries` -->
    <changeSet id="4" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `countries` (
            `country_id` int(11) NOT NULL,
            `name` varchar(70) NOT NULL DEFAULT '',
            `code` char(2) NOT NULL DEFAULT '',
            `code3` char(3) NOT NULL,
            `phone_code` int(7) NOT NULL,
            PRIMARY KEY (`country_id`),
            UNIQUE KEY `code` (`code`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `countries`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Data for table `countries` -->
    <changeSet id="5" dbms="mysql" author="edgar" context="main">
        <sql>
            LOCK TABLES `countries` WRITE;
            INSERT INTO `countries` VALUES (1,'United States','US','USA',1),(2,'Canada','CA','CAN',1),(3,'Afghanistan','AF','AFG',93),(4,'Albania','AL','ALB',355),(5,'Algeria','DZ','DZA',213),(6,'American Samoa','DS','ASM',44),(7,'Andorra','AD','AND',376),(8,'Angola','AO','AGO',244),(9,'Anguilla','AI','AIA',1264),(10,'Antarctica','AQ','ATA',672),(11,'Antigua and Barbuda','AG','ATG',1268),(12,'Argentina','AR','ARG',54),(13,'Armenia','AM','ARM',374),(14,'Aruba','AW','ABW',297),(15,'Australia','AU','AUS',61),(16,'Austria','AT','AUT',43),(17,'Azerbaijan','AZ','AZE',994),(18,'Bahamas','BS','BHS',1242),(19,'Bahrain','BH','BHR',973),(20,'Bangladesh','BD','BGD',880),(21,'Barbados','BB','BRB',1246),(22,'Belarus','BY','BLR',375),(23,'Belgium','BE','BEL',32),(24,'Belize','BZ','BLZ',501),(25,'Benin','BJ','BEN',229),(26,'Bermuda','BM','BMU',1441),(27,'Bhutan','BT','BTN',975),(28,'Bolivia','BO','BOL',591),(29,'Bosnia and Herzegovina','BA','BIH',387),(30,'Botswana','BW','BWA',267),(31,'Bouvet Island','BV','',44),(32,'Brazil','BR','BRA',55),(33,'British lndian Ocean Territory','IO','IOT',0),(34,'Brunei Darussalam','BN','BRN',673),(35,'Bulgaria','BG','BGR',359),(36,'Burkina Faso','BF','BFA',226),(37,'Burundi','BI','BDI',257),(38,'Cambodia','KH','KHM',855),(39,'Cameroon','CM','CMR',237),(40,'Cape Verde','CV','CPV',238),(41,'Cayman Islands','KY','CYM',1345),(42,'Central African Republic','CF','CAF',236),(43,'Chad','TD','TCD',235),(44,'Chile','CL','CHL',56),(45,'China','CN','CHN',86),(46,'Christmas Island','CX','CXR',61),(47,'Cocos (Keeling) Islands','CC','CCK',61),(48,'Colombia','CO','COL',57),(49,'Comoros','KM','COM',269),(50,'Congo','CG','COG',242),(51,'Cook Islands','CK','COK',682),(52,'Costa Rica','CR','CRC',506),(53,'Croatia (Hrvatska)','HR','HRV',385),(54,'Cuba','CU','CUB',53),(55,'Cyprus','CY','CYP',357),(56,'Czech Republic','CZ','CZE',420),(57,'Denmark','DK','DNK',45),(58,'Djibouti','DJ','DJI',253),(59,'Dominica','DM','DMA',1767),(60,'Dominican Republic','DO','DOM',1809),(61,'East Timor','TP','',44),(62,'Ecuador','EC','ECU',593),(63,'Egypt','EG','EGY',20),(64,'El Salvador','SV','SLV',503),(65,'Equatorial Guinea','GQ','GNQ',240),(66,'Eritrea','ER','ERI',291),(67,'Estonia','EE','EST',372),(68,'Ethiopia','ET','ETH',251),(69,'Falkland Islands (Malvinas)','FK','FLK',500),(70,'Faroe Islands','FO','FRO',298),(71,'Fiji','FJ','FJI',679),(72,'Finland','FI','FIN',358),(73,'France','FR','FRA',33),(74,'France, Metropolitan','FX','',44),(75,'French Guiana','GF','',44),(76,'French Polynesia','PF','PYF',689),(77,'French Southern Territories','TF','',44),(78,'Gabon','GA','GAB',241),(79,'Gambia','GM','GMB',220),(80,'Georgia','GE','GEO',995),(81,'Germany','DE','DEU',49),(82,'Ghana','GH','GHA',233),(83,'Gibraltar','GI','GIB',350),(84,'Greece','GR','GRC',30),(85,'Greenland','GL','GRL',299),(86,'Grenada','GD','GRD',1473),(87,'Guadeloupe','GP','',44),(88,'Guam','GU','GUM',1671),(89,'Guatemala','GT','GTM',502),(90,'Guinea','GN','GIN',224),(91,'Guinea-Bissau','GW','GNB',245),(92,'Guyana','GY','GUY',592),(93,'Haiti','HT','HTI',509),(94,'Heard and Mc Donald Islands','HM','',44),(95,'Honduras','HN','HND',504),(96,'Hong Kong','HK','HKG',852),(97,'Hungary','HU','HUN',36),(98,'Iceland','IS','IS',354),(99,'India','IN','IND',91),(100,'Indonesia','ID','IDN',62),(101,'Iran (Islamic Republic of)','IR','IRN',98),(102,'Iraq','IQ','IRQ',964),(103,'Ireland','IE','IRL',353),(104,'Israel','IL','ISR',972),(105,'Italy','IT','ITA',39),(106,'Ivory Coast','CI','CIV',225),(107,'Jamaica','JM','JAM',1876),(108,'Japan','JP','JPN',81),(109,'Jordan','JO','JOR',962),(110,'Kazakhstan','KZ','KAZ',7),(111,'Kenya','KE','KEN',254),(112,'Kiribati','KI','KIR',686),(113,'Korea, Democratic People\'s Republic of','KP','PRK',850),(114,'Korea, Republic of','KR','KOR',82),(115,'Kuwait','KW','KWT',965),(116,'Kyrgyzstan','KG','KGZ',996),(117,'Lao People\'s Democratic Republic','LA','LAO',856),(118,'Latvia','LV','LVA',371),(119,'Lebanon','LB','LBN',961),(120,'Lesotho','LS','LSO',266),(121,'Liberia','LR','LBR',231),(122,'Libyan Arab Jamahiriya','LY','LBY',218),(123,'Liechtenstein','LI','LIE',423),(124,'Lithuania','LT','LTU',370),(125,'Luxembourg','LU','LUX',352),(126,'Macau','MO','MAC',853),(127,'Macedonia','MK','MKD',389),(128,'Madagascar','MG','MDG',261),(129,'Malawi','MW','MWI',265),(130,'Malaysia','MY','MYS',60),(131,'Maldives','MV','MDV',960),(132,'Mali','ML','MLI',223),(133,'Malta','MT','MLT',356),(134,'Marshall Islands','MH','MHL',692),(135,'Martinique','MQ','',44),(136,'Mauritania','MR','MRT',222),(137,'Mauritius','MU','MUS',230),(138,'Mayotte','TY','MYT',262),(139,'Mexico','MX','MEX',52),(140,'Micronesia, Federated States of','FM','FSM',691),(141,'Moldova, Republic of','MD','MDA',373),(142,'Monaco','MC','MCO',377),(143,'Mongolia','MN','MNG',976),(144,'Montserrat','MS','MSR',1664),(145,'Morocco','MA','MAR',212),(146,'Mozambique','MZ','MOZ',258),(147,'Myanmar','MM','MMR',95),(148,'Namibia','NA','NAM',264),(149,'Nauru','NR','NRU',674),(150,'Nepal','NP','NPL',977),(151,'Netherlands','NL','NLD',31),(152,'Netherlands Antilles','AN','ANT',599),(153,'New Caledonia','NC','NCL',687),(154,'New Zealand','NZ','NZL',64),(155,'Nicaragua','NI','NIC',505),(156,'Niger','NE','NER',227),(157,'Nigeria','NG','NGA',234),(158,'Niue','NU','NIU',683),(159,'Norfork Island','NF','',44),(160,'Northern Mariana Islands','MP','MNP',1670),(161,'Norway','NO','NOR',47),(162,'Oman','OM','OMN',968),(163,'Pakistan','PK','PAK',92),(164,'Palau','PW','PLW',680),(165,'Panama','PA','PAN',507),(166,'Papua New Guinea','PG','PNG',675),(167,'Paraguay','PY','PRY',595),(168,'Peru','PE','PER',51),(169,'Philippines','PH','PHL',63),(170,'Pitcairn','PN','PCN',870),(171,'Poland','PL','POL',48),(172,'Portugal','PT','PRT',351),(173,'Puerto Rico','PR','PRI',1),(174,'Qatar','QA','QAT',974),(175,'Reunion','RE','',44),(176,'Romania','RO','ROU',40),(177,'Russian Federation','RU','RUS',7),(178,'Rwanda','RW','RWA',250),(179,'Saint Kitts and Nevis','KN','KNA',1869),(180,'Saint Lucia','LC','LCA',1758),(181,'Saint Vincent and the Grenadines','VC','VCT',1784),(182,'Samoa','WS','WSM',685),(183,'San Marino','SM','SMR',378),(184,'Sao Tome and Principe','ST','STP',239),(185,'Saudi Arabia','SA','SAU',966),(186,'Senegal','SN','SEN',221),(187,'Seychelles','SC','SYC',248),(188,'Sierra Leone','SL','SLE',232),(189,'Singapore','SG','SGP',65),(190,'Slovakia','SK','SVK',421),(191,'Slovenia','SI','SVN',386),(192,'Solomon Islands','SB','SLB',677),(193,'Somalia','SO','SOM',252),(194,'South Africa','ZA','ZAF',27),(195,'South Georgia South Sandwich Islands','GS','',44),(196,'Spain','ES','ESP',34),(197,'Sri Lanka','LK','LKA',94),(198,'St. Helena','SH','SHN',290),(199,'St. Pierre and Miquelon','PM','SPM',508),(200,'Sudan','SD','SDN',249),(201,'Suriname','SR','SUR',597),(202,'Svalbarn and Jan Mayen Islands','SJ','SJM',0),(203,'Swaziland','SZ','SWZ',268),(204,'Sweden','SE','SWE',46),(205,'Switzerland','CH','CHE',41),(206,'Syrian Arab Republic','SY','SYR',963),(207,'Taiwan','TW','TWN',886),(208,'Tajikistan','TJ','TJK',992),(209,'Tanzania, United Republic of','TZ','TZA',255),(210,'Thailand','TH','THA',66),(211,'Togo','TG','TGO',228),(212,'Tokelau','TK','TKL',690),(213,'Tonga','TO','TON',676),(214,'Trinidad and Tobago','TT','TTO',1868),(215,'Tunisia','TN','TUN',216),(216,'Turkey','TR','TUR',90),(217,'Turkmenistan','TM','TKM',993),(218,'Turks and Caicos Islands','TC','TCA',1649),(219,'Tuvalu','TV','TUV',688),(220,'Uganda','UG','UGA',256),(221,'Ukraine','UA','UKR',380),(222,'United Arab Emirates','AE','ARE',971),(223,'United Kingdom','GB','GBR',44),(224,'United States minor outlying islands','UM','',44),(225,'Uruguay','UY','URY',598),(226,'Uzbekistan','UZ','UZB',998),(227,'Vanuatu','VU','VUT',678),(228,'Vatican City State','VA','VAT',39),(229,'Venezuela','VE','VEN',58),(230,'Vietnam','VN','VNM',84),(231,'Virigan Islands (British)','VG','VGB',1284),(232,'Virgin Islands (U.S.)','VI','VIR',1340),(233,'Wallis and Futuna Islands','WF','WLF',681),(234,'Western Sahara','EH','ESH',0),(235,'Yemen','YE','YEM',967),(236,'Yugoslavia','YU','',44),(237,'Zaire','ZR','',44),(238,'Zambia','ZM','ZMB',260),(239,'Zimbabwe','ZW','ZWE',263),(240,'Kosovo','XK','',381),(243,'Montenegro','ME','MNE',382),(386,'Serbia','RS','SRB',381);
            UNLOCK TABLES;
        </sql>
    </changeSet>

    <!-- Table structure for table `events` -->
    <changeSet id="6" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `events` (
            `event_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `title` varchar(150) NOT NULL,
            `description` text NOT NULL,
            `created` datetime NOT NULL,
            `updated` datetime DEFAULT NULL,
            `author_profile_id` bigint(20) NOT NULL,
            PRIMARY KEY (`event_id`),
            UNIQUE KEY `events_id_uindex` (`event_id`),
            KEY `event` (`author_profile_id`),
            CONSTRAINT `events_profile__fk` FOREIGN KEY (`author_profile_id`) REFERENCES `profile` (`profile_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE `events`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `login_credentials` -->
    <changeSet id="7" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `login_credentials` (
            `login_credential_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
            `login` varchar(50) NOT NULL,
            `password` varchar(50) NOT NULL,
            `profile_id` bigint(20) NOT NULL,
            `created` datetime DEFAULT NULL,
            `last_login` datetime NOT NULL,
            PRIMARY KEY (`login_credential_id`),
            UNIQUE KEY `login_credentials_profile_id_uindex` (`profile_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `login_credentials`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `participants_events` -->
    <changeSet id="8" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `participants_events` (
            `profile_id` bigint(20) NOT NULL,
            `event_id` bigint(20) NOT NULL,
            KEY `participants_events_profile_id_index` (`profile_id`),
            KEY `participants_events_event_id_index` (`event_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `participants_events`;
            </sql>
        </rollback>
    </changeSet>

    <!-- Table structure for table `profile` -->
    <changeSet id="9" dbms="mysql" author="edgar" context="main">
        <sql>
            CREATE TABLE `profile` (
            `profile_id` bigint(20) NOT NULL AUTO_INCREMENT,
            `name` varchar(50) NOT NULL,
            `surname` varchar(100) NOT NULL,
            `contact_id` bigint(20) DEFAULT NULL,
            `login_credentials_id` bigint(20) NOT NULL,
            `created` datetime NOT NULL,
            `updated` datetime NOT NULL,
            PRIMARY KEY (`profile_id`),
            UNIQUE KEY `profile_id_uindex` (`profile_id`),
            KEY `profile_contact__fk` (`contact_id`),
            CONSTRAINT `profile_contact__fk` FOREIGN KEY (`contact_id`) REFERENCES `contact` (`contact_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
        <rollback>
            <sql>
                DROP TABLE IF EXISTS `profile`;
            </sql>
        </rollback>
    </changeSet>
</databaseChangeLog>